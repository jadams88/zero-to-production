<layout-center-page class="container">
  <!-- Note, the cdkScrollable directive is only uses for scrolling the viewport for teh form builder
     when dragging sections/fields
     In a future version, this package will most probably not be necessary. see
     https://github.com/angular/components/pull/18082
  -->
  <div
    class="content"
    ztpLazyLoadScroll
    cdkScrollable
    (loadIndex)="loadModule($event)"
    [modules]="examples?.length"
  >
    <div
      *ngFor="let example of examples; trackBy: trackExample; let last = last"
      [id]="example.url"
      #lazyItem
    >
      <!-- 
    Because we are lazy-loading components as we scroll here, if 'looks' odd if the
    first component is not rendered when you first navigate to this view.
    Because we don't lazy load the first component, we hard code the first component
    and bundle it in the main component.

    In this demo, our 'demo' state is hard coded and initialized in the entry component
    for the feature shell. Because of this we can guarantee the order of the demo.
    This might NOT be the case if you load data from a server and you will have to adapt appropriately
   -->
      <ztp-example-dynamic-form
        *ngIf="example.url === 'dynamic-form'; else elseBlock"
      >
      </ztp-example-dynamic-form>

      <ng-template #elseBlock>
        <ztp-example-detail
          #example.url
          [example]="example"
          [factory]="selectFactory(example.url) | async"
        >
        </ztp-example-detail>
      </ng-template>
    </div>
  </div>
</layout-center-page>
